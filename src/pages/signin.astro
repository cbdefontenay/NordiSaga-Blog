---
import Layout from "../layouts/Layout.astro";

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
  return redirect("/dashboard");
}
---

<Layout title="Sign in">
  <div class="h-screen w-full flex flex-col items-center">
    <h1 class="text-lg md:text-xl text-gray-200 font-skranjiRegular mb-10">
      S'abonner à la Newsletter
    </h1>
    <p class="mb-10 font-robotoRegular text-base text-red-400">
      Déjà abonné ?
      <a href="/" class="text-red-600 hover:underline hover:text-teal-500">
        Retour à l'accueil
      </a>
    </p>

    <p
      class="mb-5 items-center text-orange-700 font-robotoMedium text-sm w-1/3"
    >
      Vous avez reçu un email de confirmation. Veuillez valider votre email
      avant de procéder à l'abonnement.
    </p>

    <form action="/api/auth/signin" method="post" class="flex flex-col">
      <label for="email" class="mb-2 font-robotoMedium text-zinc-300">
        Courriel:
      </label>

      <input
        type="email"
        name="email"
        id="email"
        class="mb-5 rounded-2xl p-2"
        placeholder="Courriel..."
      />

      <label for="password" class="mb-2 font-robotoMedium text-zinc-300"
        >Mot de passe</label
      >
      <input
        type="password"
        name="password"
        id="password"
        placeholder="Mot de passe..."
        class="mb-5 rounded-2xl p-2"
      />

      <button
        type="submit"
        class="rounded-xl bg-darkBg text-neutral-300 px-5 py-2 hover:bg-yellow-600 hover:text-darkBg font-robotoMedium"
      >
        Finaliser l'abonnement
      </button>

      <button
        type="submit"
        class="bg-transparent text-neutral-300 px-5 py-2 font-robotoMedium mt-4 text-sm hover:underline hover:text-cyan-400"
      >
        J'ai déjà un abonnement
      </button>
    </form>
  </div>
</Layout>
